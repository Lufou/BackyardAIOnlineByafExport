# BackyardAIOnlineByafExport

This tool allows you to export your online characters from [Backyard.ai](https://backyard.ai) (BYAF extension).  
<br>

You are welcome to propose ideas in the **Issues** section or submit **Pull Requests**.  
<br>

> [!IMPORTANT]
> The "Parties" feature from Backyard.ai is **not supported**. Characters belonging to parties will simply be separated from the party.  
I currently don’t plan to support this feature, but you are still welcome to open a Pull Request if you wish to implement it.
<br>Anyway, I believe BYAF file format does not support **Parties** at the moment.

<br>

# Requirements

- You must have [NodeJS](https://nodejs.org/en) installed in your environment
- If you want to contribute: 
    - Clone the repo using the command `git clone https://github.com/Lufou/BackyardAIOnlineByafExport.git`
    - Go to the folder of the repo you've just cloned (with the `cd` command)
    - Here, execute the command `npm install` to install required dependencies.
- If you just want to use it:
    - Grab the online-backyard-exporter file from the [latest release](https://github.com/Lufou/BackyardAIOnlineByafExport/releases/latest)
    - Extract the archive where you want
<br>

# How to run it ?

Very easy:
- First, make sure to be logged in on Backyard.ai in your web browser
- Then, just go to the folder you've cloned the repo or extracted the release archive into and execute the command `node . <options>`
<br>

# Options

| Option              | Alias             | Type      | Défaut     | Description                                                                                                                               |
| ------------------- | ----------------- | --------- | ---------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| `--debug`           | `-d`, `--verbose` | `boolean` | `false`    | Enable debug logs (display more messages during execution)                                                                    |
| `--output-dir`      | `-o`              | `string`  | `./output` | Define the output folder for generated BYAF files                                                                          |
| `--exit-on-failure` | `-e`              | `boolean` | `true`     | Exit the program if something fails                                                                                       |
| `--browser`         | `-b`              | `string`  | `null`     | Specify the web browser to extract the session cookies from. Format: `BROWSER[+KEYRING][:PROFILE][::CONTAINER]`. Name of the browser to load cookies from, optional keyring name prefixed with '+', optional profile prefixed with ':', and optional container prefixed with '::' ('none' for no container (default), 'all' for all containers) |
| `--messages`        | `-m`              | `boolean` | `false`    | Export chat messages                                                                                                   |


## FAQ

### Q: Why does the tool need my cookies?
**A:** In order to access your online character list and data, you must be logged in to Backyard.ai.  
The tool uses your cookies to authenticate with Backyard.ai and export your characters.  
<br>

### Q: What are the supported browsers for cookies auto using?
**A:** Supported browsers are: Brave, Chrome, Chromium, Edge, Opera, Thorium, Vivaldi, Firefox, Librewolf, Zen, Safari, Orion.<br>
Since mid-2024, Chromium based browsers cookies on Windows, sometimes can't be decrypted by external programs. You will need to use the `--cookies` to set the cookies if you are not connected on Backyard.ai on another non-Chromium based browser.

### Q: How does the tool use my cookies?
**A:** You can check how it works in the file `cookies.js`.  
It accesses your browser profile folder, reads the database containing your saved cookies, if the cookies are encrypted tries to decrypt them, and then uses `main.js` to extract only the cookies for the **backyard.ai** domain — nothing else.

The cookies are **not modified**, **not sent anywhere**, and are only used for authenticated requests to the Backyard.ai website.  
<br>

### Q: Do you plan on adding feature X?
**A:** Planned features are listed in the `TODO` file.  
If you have an idea or a bug to report, please open an **Issue**.  
You’re also very welcome to submit **Pull Requests**.
